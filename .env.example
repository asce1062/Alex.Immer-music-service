# ============================================================================
# Music Service Environment Configuration
# ============================================================================
#
# Copy this file to .env and fill in your actual values
# DO NOT commit the .env file to version control
#
# Usage: The application will automatically load these variables from .env
# ============================================================================

# ----------------------------------------------------------------------------
# AWS Credentials (REQUIRED for S3 Upload & Terraform)
# ----------------------------------------------------------------------------
# These credentials allow the application to upload files to your S3 bucket
# and allow Terraform to manage your infrastructure
#
# HOW TO GET THESE VALUES:
# 1. Log into AWS Console: https://console.aws.amazon.com/
# 2. Navigate to IAM (Identity and Access Management)
# 3. Click "Users" in the left sidebar
# 4. Either:
#    a) Click on your existing user, OR
#    b) Create a new user by clicking "Add users"
#       - Choose a username (e.g., "music-service-uploader")
#       - Select "Programmatic access"
#       - For Terraform: Attach policies for S3, CloudFront, ACM, IAM
#       - For uploads only: Attach policy "AmazonS3FullAccess" (or custom policy)
# 5. Go to "Security credentials" tab
# 6. Click "Create access key"
# 7. Choose "Application running outside AWS"
# 8. Copy the Access Key ID and Secret Access Key (shown only once!)
#
# IMPORTANT: Keep these secret! Anyone with these can access your S3 bucket

AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_access_key_here

# AWS Region (REQUIRED for Terraform and AWS CLI)
# MUST match the region where your resources will be created
# Common values: us-east-1, us-west-2, eu-west-1, ap-southeast-1
AWS_DEFAULT_REGION=us-east-1

# S3 Transfer Acceleration (RECOMMENDED for international uploads)
# Speeds up uploads by 2-5x for locations far from bucket region
# Must be enabled on S3 bucket first (see S3_SETUP_GUIDE.md)
# Cost: $0.04/GB (negligible for most use cases)
# Accelerated endpoint: {bucket-name}.s3-accelerate.amazonaws.com
S3_USE_ACCELERATION=true

# ----------------------------------------------------------------------------
# Music Service Configuration
# ----------------------------------------------------------------------------

# Base path for music files (default: ./Music)
# This is where the application looks for albums/, covers/, tracker/ directories
MUSIC_BASE_PATH=./Music

# S3 Bucket Name (REQUIRED for upload)
# HOW TO GET THIS:
# 1. Go to AWS S3 Console: https://s3.console.aws.amazon.com/
# 2. Either use existing bucket OR create new one:
#    - Click "Create bucket"
#    - Choose a globally unique name (e.g., "alexmbugua-music")
#    - Select region (recommend: us-east-1 for lowest latency)
#    - Uncheck "Block all public access" if you want public CDN access
#    - Enable versioning (recommended)
# 3. Copy the bucket name here
MUSIC_S3_BUCKET=alexmbugua-music

# S3 Region (default: us-east-1)
# MUST match the region where your S3 bucket was created
# Common values: us-east-1, us-west-2, eu-west-1, ap-southeast-1
MUSIC_S3_REGION=us-east-1

# CDN Base URL (for generating public URLs in metadata)
# This is what users will use to access your files
#
# OPTIONS:
# 1. Direct S3 URL (free, slower):
#    https://your-bucket-name.s3.amazonaws.com
#
# 2. CloudFront CDN (recommended for production):
#    HOW TO SET UP CLOUDFRONT:
#    a) Go to CloudFront Console: https://console.aws.amazon.com/cloudfront/
#    b) Click "Create Distribution"
#    c) Origin Domain: Select your S3 bucket
#    d) Origin Path: leave empty
#    e) Viewer Protocol Policy: "Redirect HTTP to HTTPS"
#    f) Allowed HTTP Methods: GET, HEAD, OPTIONS
#    g) Cache Policy: "CachingOptimized"
#    h) Click "Create Distribution"
#    i) Wait for deployment (5-15 minutes)
#    j) Copy the "Distribution domain name" (e.g., d1234abcd.cloudfront.net)
#    k) Optional: Set up custom domain (CNAME) in Route 53
#
# 3. Custom Domain (requires CloudFront + Route 53):
#    https://cdn.yourdomain.com
MUSIC_CDN_BASE=https://cdn.alexmbugua.me

# ----------------------------------------------------------------------------
# Artist Information (Optional)
# ----------------------------------------------------------------------------
# Default values for metadata generation
# MUSIC_DEFAULT_ARTIST=Alex.Immer
# MUSIC_DEFAULT_COMPOSER=Alex.Immer

# ----------------------------------------------------------------------------
# Thumbnail Configuration (Optional)
# ----------------------------------------------------------------------------
# MUSIC_THUMBNAIL_SIZE=400x400
# MUSIC_THUMBNAIL_FORMAT=png
# MUSIC_THUMBNAIL_QUALITY=85

# ----------------------------------------------------------------------------
# Terraform Configuration (Optional - for infrastructure deployment)
# ----------------------------------------------------------------------------
# CloudFront Distribution ID (for cache invalidation)
# HOW TO GET:
#   - AWS Console > CloudFront > Distributions > ID column
#   - OR run: aws cloudfront list-distributions --query 'DistributionList.Items[0].Id' --output text
#   - OR from Terraform output: terraform output cloudfront_distribution_id
CLOUDFRONT_DISTRIBUTION_ID=E1NXRJU18IBSQX

# AWS Account ID (for IAM policies and resource ARNs)
# HOW TO GET:
#   - AWS Console > Account dropdown (top right) > Account
#   - OR run: aws sts get-caller-identity --query Account --output text
AWS_ACCOUNT_ID=123456789012

# ACM Certificate ID (for importing existing SSL certificates)
# HOW TO GET:
#   - AWS Console > Certificate Manager (MUST be us-east-1 region for CloudFront!)
#   - Click on your certificate > Copy the Certificate ID (NOT the full ARN)
#   - OR run: aws acm list-certificates --region us-east-1 --query 'CertificateSummaryList[0].CertificateArn' --output text
#   - Extract just the ID from: arn:aws:acm:us-east-1:ACCOUNT_ID:certificate/CERTIFICATE_ID
# IMPORTANT: This is required ONLY if importing existing AWS resources with Terraform
ACM_CERTIFICATE_ID=your-certificate-id-here

# IAM User Name (for Terraform import script)
# The service account username created for music uploads
# Default: "music-service"
IAM_USER_NAME=music-service

# ----------------------------------------------------------------------------
# Terraform Backend (Optional - for remote state storage)
# ----------------------------------------------------------------------------
# Uncomment and configure if using S3 backend for Terraform state
# TF_STATE_BUCKET=my-terraform-state-bucket
# TF_STATE_KEY=music-service/terraform.tfstate
# TF_STATE_REGION=us-east-1
# TF_STATE_DYNAMODB_TABLE=terraform-locks

# ============================================================================
# VERIFICATION CHECKLIST
# ============================================================================
# Before running uploads, verify:
#
# [ ] AWS_ACCESS_KEY_ID is set
# [ ] AWS_SECRET_ACCESS_KEY is set
# [ ] AWS_DEFAULT_REGION is set
# [ ] MUSIC_S3_BUCKET matches your actual S3 bucket name
# [ ] MUSIC_S3_REGION matches where your bucket was created
# [ ] S3 bucket has correct permissions (public read if using as CDN)
# [ ] IAM user has S3 write permissions for the bucket
# [ ] .env file is added to .gitignore
#
# Before deploying infrastructure with Terraform, verify:
#
# [ ] AWS_ACCESS_KEY_ID has permissions for S3, CloudFront, ACM, IAM
# [ ] AWS_DEFAULT_REGION is set to us-east-1 (required for ACM)
# [ ] CLOUDFRONT_DISTRIBUTION_ID is set (if importing existing distribution)
# [ ] AWS_ACCOUNT_ID is set (for IAM policies)
#
# Test your setup:
#   # Test music sync
#   python3 scripts/music_sync_cli.py
#   > status
#
#   # Test Terraform
#   cd infrastructure/terraform
#   terraform init
#   terraform plan
#
# ============================================================================
